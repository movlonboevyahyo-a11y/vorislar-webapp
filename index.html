<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vorislar WebApp</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      margin: 0;
      padding: 16px;
      font-family: system-ui, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
    }

    h1 {
      color: #38bdf8;
      margin-bottom: 12px;
    }

    h3 {
      color: #7dd3fc;
      margin-top: 0;
    }

    .card {
      background: #020617;
      border: 1px solid #1e293b;
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 16px;
    }

    input {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      outline: none;
      background: #020617;
      color: #fff;
      border: 1px solid #1e293b;
      margin-bottom: 10px;
    }

    button {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      background: #38bdf8;
      color: #020617;
      font-weight: bold;
      cursor: pointer;
    }

    .nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      background: #020617;
      border-top: 1px solid #1e293b;
    }

    .nav button {
      flex: 1;
      background: none;
      color: #e5e7eb;
      border-radius: 0;
    }

    .nav button.active {
      background: #0f172a;
      color: #38bdf8;
    }

    .green { color: #22c55e; }
    .yellow { color: #facc15; }
  </style>
</head>

<body>

  <h1>ğŸ“˜ Vorislar</h1>

  <div class="card">
    <p id="user">Foydalanuvchi: â€”</p>
    <p>Ball: <b id="ball">0</b></p>
  </div>

  <div id="content"></div>

  <div class="nav">
    <button id="nav-lugat" class="active" onclick="openPage('lugat')">ğŸ“˜ Lugâ€˜at</button>
    <button id="nav-test" onclick="openPage('test')">ğŸ“ Test</button>
    <button id="nav-essay" onclick="openPage('essay')">âœï¸ Essay</button>
    <button id="nav-profil" onclick="openPage('profil')">ğŸ‘¤ Profil</button>
  </div>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready();

  let state = {
    ball: 0
  };

  if (tg.initDataUnsafe?.user) {
    document.getElementById("user").innerText =
      "Foydalanuvchi: " + tg.initDataUnsafe.user.first_name;
  }

  function updateBall() {
    document.getElementById("ball").innerText = state.ball;
  }

  function openPage(page) {
    document.querySelectorAll(".nav button").forEach(b => b.classList.remove("active"));
    document.getElementById("nav-" + page).classList.add("active");

    const content = document.getElementById("content");

    /* ===== LUGâ€˜AT (BALL YOâ€˜Q) ===== */
    if (page === "lugat") {
      content.innerHTML = `
        <div class="card">
          <h3>ğŸ“˜ Lugâ€˜at</h3>
          <input id="word" placeholder="Soâ€˜z kiriting..." />
          <button onclick="searchWord()">Qidirish</button>
          <div id="result"></div>
        </div>
      `;
    }

    /* ===== TEST (KEYIN ULANADI) ===== */
    if (page === "test") {
      state.ball += 5;
      updateBall();

      content.innerHTML = `
        <div class="card">
          <h3>ğŸ“ Testlar</h3>
          <p>Grammatika va milliy sertifikat testlari.</p>
          <p class="green">+5 ball (test faolligi)</p>
        </div>
      `;
    }

    /* ===== ESSAY (KEYIN AI ULANADI) ===== */
    if (page === "essay") {
      state.ball += 10;
      updateBall();

      content.innerHTML = `
        <div class="card">
          <h3>âœï¸ Essay</h3>
          <p>Essay yozish va AI orqali baholash.</p>
          <p class="green">+10 ball (essay topshirildi)</p>
        </div>
      `;
    }

    /* ===== PROFIL + PREMIUM ===== */
    if (page === "profil") {

      let premium =
        state.ball >= 100 ? "40%" :
        state.ball >= 60  ? "20%" :
        state.ball >= 30  ? "10%" :
        "0%";

      content.innerHTML = `
        <div class="card">
          <h3>ğŸ‘¤ Profil</h3>
          <p>Ball: <b>${state.ball}</b></p>
          <p>Premium chegirma: <b class="yellow">${premium}</b></p>
        </div>
      `;
    }
  }

  function searchWord() {
    const word = document.getElementById("word").value.trim();
    const result = document.getElementById("result");

    if (!word) {
      result.innerHTML = "<p>â— Soâ€˜z kiriting</p>";
      return;
    }

    result.innerHTML = `
      <p><b>Soâ€˜z:</b> ${word}</p>
      <p><b>Maâ€™nosi:</b> Namuna maâ€™no (keyin API ulanadi)</p>
      <p><b>Sinonim:</b> â€”</p>
      <p><b>Antonim:</b> â€”</p>
    `;
  }

  openPage("lugat");
</script>

</body>
</html>
