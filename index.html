<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vorislar lugâ€˜ati</title>

<style>
body{font-family:Arial;background:#f4f4f4;margin:0;padding-bottom:70px}
section{background:#fff;margin:12px;padding:12px;border-radius:8px}
.hidden{display:none}
button{padding:10px;margin-top:10px}
nav{position:fixed;bottom:0;left:0;right:0;display:flex;background:#ddd}
nav button{flex:1;border:none;background:#eee}
.card{margin:10px 0}
</style>
</head>

<body>

<!-- TEST -->
<section id="tests">
<h2>ğŸ“˜ Testlar</h2>
<select id="blockSelect"></select>
<div id="testBox"></div>
<button onclick="finishTest()">Testni yakunlash</button>
</section>

<!-- ESSAY -->
<section id="essay" class="hidden">
<h2>âœï¸ Essay</h2>
<textarea id="essayText" rows="6" style="width:100%" placeholder="Essay yozing..."></textarea>
<button onclick="sendEssay()">Essay yuborish</button>
</section>

<!-- PROFIL -->
<section id="profile" class="hidden">
<h2>ğŸ‘¤ Profil</h2>
<p>Holat: <b id="status"></b></p>
<p>ğŸ¯ Ball: <span id="scoreView">0</span></p>
<p>ğŸ“˜ Bepul test bloklari: 1â€“5</p>
<p>âœï¸ Essay: kuniga 1 ta</p>
</section>

<!-- PASTKI MENU -->
<nav>
<button onclick="openTab('tests')">ğŸ  Testlar</button>
<button onclick="openTab('essay')">âœï¸ Essay</button>
<button onclick="openTab('profile')">â­ Premium</button>
</nav>

<script>
// ===== SOZLAMALAR =====
let isPremium = true; // false qilsang oddiy user boâ€˜ladi
let score = Number(localStorage.getItem("score") || 0);
let essayUsed = localStorage.getItem("essayUsed");

// ===== TEST MAÊ¼LUMOTLARI (100 TA) =====
let tests = {};
for(let b=1;b<=10;b++){
  tests["Blok "+b] = [];
  for(let i=1;i<=10;i++){
    tests["Blok "+b].push({
      q:`${b}.${i} Savol: Ot soâ€˜z turkumi nimani bildiradi?`,
      a:"Predmet",
      b:"Harakat",
      c:"Belgi",
      d:"Miqdor",
      correct:"a"
    });
  }
}

// ===== SELECT =====
const blockSelect=document.getElementById("blockSelect");
blockSelect.innerHTML='<option value="">â€” Blok tanlang â€”</option>';
Object.keys(tests).forEach((b,i)=>{
  if(!isPremium && i>=5) return;
  blockSelect.innerHTML+=`<option>${b}</option>`;
});

// ===== TEST CHIQARISH =====
blockSelect.onchange=()=>{
  testBox.innerHTML="";
  tests[blockSelect.value]?.forEach((t,i)=>{
    testBox.innerHTML+=`
    <div class="card">
    <b>${t.q}</b><br>
    <label><input type="radio" name="q${i}" value="a"> A) ${t.a}</label><br>
    <label><input type="radio" name="q${i}" value="b"> B) ${t.b}</label><br>
    <label><input type="radio" name="q${i}" value="c"> C) ${t.c}</label><br>
    <label><input type="radio" name="q${i}" value="d"> D) ${t.d}</label>
    </div>`;
  });
};

// ===== TESTNI YAKUNLASH =====
function finishTest(){
  let s=0;
  tests[blockSelect.value]?.forEach((t,i)=>{
    let r=document.querySelector(`input[name="q${i}"]:checked`);
    if(r && r.value===t.correct) s++;
  });
  score+=s;
  localStorage.setItem("score",score);
  scoreView.innerText=score;
  alert("Yakunlandi! Ball: "+s);
}

// ===== ESSAY =====
function sendEssay(){
  if(!isPremium && essayUsed){
    alert("Bugungi bepul essay limiti tugadi");
    return;
  }
  essayUsed=true;
  localStorage.setItem("essayUsed",1);
  alert("Essay qabul qilindi âœ…");
  essayText.value="";
}

// ===== PROFIL =====
scoreView.innerText=score;
status.innerText=isPremium?"Premium âœ…":"Oddiy âŒ";

// ===== TAB =====
function openTab(id){
  ["tests","essay","profile"].forEach(x=>document.getElementById(x).classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}
</script>

</body>
</html>
